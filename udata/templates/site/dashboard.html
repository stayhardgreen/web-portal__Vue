{% extends theme("base.html") %}
{% from theme('macros/timeline.html') import timeline with context %}

{% set meta = {
    'title': _('Dashboard'),
    'description': _('Site metrics and activity'),
    'keywords': [_('metrics'), _('activity')],
} %}

{% block breadcrumb %}
    <li class="active">{{ _('Dashboard') }}</li>
{% endblock %}

{% block content %}
<section class='metrics'>
    <div class="container">
        {% for row in metrics %}
        <article>
            <h2>{{ row.title }}</h2>
            <ul class="chart-list row">
                {% for widget in row.widgets %}
                <li class="col-md-4">
                    <a {% if widget.endpoint %}
                        href="{{ url_for(widget.endpoint, **(widget.args or {})) }}"
                        {% endif %}
                        data-chart-type="{{ widget.type }}"
                        data-chart-data="{{ widget.metric }}">
                        {{ widget.title }}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </article>
        {% endfor %}
    </div>
</section>

<section class="community">
    <header>
        <div class="container">
            <div class="cover-communaute"></div>
            <div class="page-header">
                <h2>{{ _('Community activity') }}</h2>
            </div>
        </div>
    </header>
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                {{ timeline(activities) }}
            </div>
        </div>
    </div>
</section>


{% endblock %}
