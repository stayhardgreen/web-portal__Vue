{% extends theme('layouts/form.html') %}
{% import 'macros/forms.html' as forms with context %}
{% from  'macros/uploader.html' import uploader %}

{% set upload_endpoint = upload_endpoint|default('upload') %}

{% block extra_js %}
{{ super() }}
<script type="text/javascript" src="{{ static('dataset/resource-form.js') }}"></script>
{% endblock %}

{% block main_content %}
<div class="form-bg">
    <div class="row">
        <div class="col-xs-12">
            <h3 class="form-title">{{ form_title }}</h3>
        </div>
    </div>
    <div class="row resource-form">
        <div class="col-xs-12">
            <form class="form-horizontal" method="post" action=".">
                {{ form.csrf_token() }}
                {{ forms.field(form.title) }}
                {{ forms.field(form.description) }}
                {{ forms.field(form.type) }}

                <div class="form-upload row">
                    <div class="col-xs-12 col-md-offset-3 col-md-9">
                    {{ uploader(upload_endpoint) }}
                    </div>
                </div>

                <div class="form-upload-fields hide">
                    {{ forms.field(form.url) }}
                    {{ forms.field(form.format) }}
                    {{ forms.field(form.mime) }}
                    {{ forms.field(form.size) }}
                    {{ forms.field(form.checksum) }}
                </div>

                <div class="form-group">
                    {% block form_controls %}{% endblock %}
                </div>

            </form>
        </div>
    </div>
</div>
{% endblock %}
